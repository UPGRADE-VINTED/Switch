<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Configurateur Switch</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 10px;
    background: #f7f7f7;
  }
  h2 {
    margin-bottom: 5px;
  }
  .step {
    margin-bottom: 20px;
  }
  .options {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .option {
    border: 2px solid #ccc;
    border-radius: 8px;
    padding: 5px;
    cursor: pointer;
    text-align: center;
    width: 150px;
    background: white;
    transition: border-color 0.3s;
  }
  .option.selected {
    border-color: #28a745;
    box-shadow: 0 0 10px #28a745a0;
  }
  .option img {
    max-width: 150px;
    height: auto;
    margin-bottom: 5px;
    border-radius: 6px;
  }
  .option span {
    display: block;
    font-weight: bold;
  }
  .option small {
    font-weight: normal;
    font-size: 0.85em;
    color: #555;
  }
  button {
    background: #28a745;
    color: white;
    border: none;
    padding: 12px 25px;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
  }
  button:disabled {
    background: #aaa;
    cursor: not-allowed;
  }
  #summary {
    background: white;
    padding: 15px;
    border-radius: 10px;
    font-family: 'Courier New', Courier, monospace;
    white-space: pre-wrap;
    box-shadow: 0 0 8px #ddd;
    max-width: 400px;
    margin-top: 20px;
  }
  @media(max-width: 480px) {
    .options {
      justify-content: center;
    }
    .option {
      width: 90vw;
    }
    .option img {
      max-width: 90vw;
    }
  }
</style>
</head>
<body>

<h1>Configure ta Switch</h1>

<div class="step" id="step1">
  <h2>1. Choisis ta Switch</h2>
  <div class="options" id="switch-options">
    <div class="option" data-name="Switch modèle V1" data-price="140">
      <img src="https://cdn.pixabay.com/photo/2014/04/03/10/51/video-game-309345_1280.png" alt="Switch V1"/>
      <span>Switch modèle V1</span>
      <small>(manque SD, + puce)</small>
      <br>140 €
    </div>
    <div class="option" data-name="Switch modèle V2" data-price="190">
      <img src="https://cdn.pixabay.com/photo/2017/01/31/21/25/video-game-2022164_1280.png" alt="Switch V2"/>
      <span>Switch modèle V2</span>
      <small>(état impeccable)</small>
      <br>190 €
    </div>
    <div class="option" data-name="Switch Lite" data-price="120">
      <img src="https://cdn.pixabay.com/photo/2017/01/31/21/26/video-game-2022165_1280.png" alt="Switch Lite"/>
      <span>Switch Lite</span>
      <small>(compact & portable)</small>
      <br>120 €
    </div>
  </div>
</div>

<div class="step" id="step2" style="display:none;">
  <h2>2. Choisis ta carte SD</h2>
  <div class="options" id="sd-options">
    <div class="option" data-name="Carte SD 128 Go" data-price="0">
      <img src="https://cdn.pixabay.com/photo/2017/01/11/21/26/sd-card-1971223_1280.png" alt="SD 128 Go"/>
      <span>128 Go</span>
      <small>~10 jeux</small>
      <br>0 €
    </div>
    <div class="option" data-name="Carte SD 256 Go" data-price="30">
      <img src="https://cdn.pixabay.com/photo/2014/04/03/10/50/sd-card-309338_1280.png" alt="SD 256 Go"/>
      <span>256 Go</span>
      <small>~18 jeux</small>
      <br>30 €
    </div>
  </div>
</div>

<div class="step" id="step3" style="display:none;">
  <h2>3. Choisis tes Joy-Con</h2>
  <div class="options" id="joycon-options">
    <div class="option" data-name="Joy-Con rouge/bleu" data-price="40">
      <img src="https://cdn.pixabay.com/photo/2018/11/05/13/52/game-controller-3794399_1280.png" alt="Joy-Con rouge/bleu"/>
      <span>Joy-Con rouge/bleu</span>
      <br>40 €
    </div>
    <div class="option" data-name="Joy-Con gris" data-price="35">
      <img src="https://cdn.pixabay.com/photo/2019/11/21/20/01/game-controller-4647061_1280.png" alt="Joy-Con gris"/>
      <span>Joy-Con gris</span>
      <br>35 €
    </div>
  </div>
</div>

<div class="step" id="step4" style="display:none;">
  <h2>4. Choisis tes accessoires</h2>
  <div class="options" id="accessory-options">
    <div class="option" data-name="Puce Hwfly" data-price="50">
      <img src="https://cdn.pixabay.com/photo/2018/02/24/14/00/memory-3171150_1280.png" alt="Puce Hwfly"/>
      <span>Puce Hwfly</span>
      <br>50 €
    </div>
    <div class="option" data-name="Câble HDMI" data-price="5">
      <img src="https://cdn.pixabay.com/photo/2014/04/03/10/51/hdmi-309346_1280.png" alt="Câble HDMI"/>
      <span>Câble HDMI</span>
      <br>5 €
    </div>
  </div>
</div>

<button id="next-btn" disabled>Suivant</button>

<div id="summary" style="display:none; white-space: pre-wrap; font-family: monospace;"></div>

<script>
  const steps = ['step1', 'step2', 'step3', 'step4'];
  let currentStep = 0;

  let selections = {
    switch: null,
    sd: null,
    joycon: null,
    accessory: []
  };

  const nextBtn = document.getElementById('next-btn');
  const summaryDiv = document.getElementById('summary');

  function updateButton() {
    let canContinue = false;
    if (currentStep === 3) {
      canContinue = true;
    } else {
      const stepId = steps[currentStep];
      const options = document.querySelectorAll(`#${stepId} .option.selected`);
      canContinue = options.length > 0;
    }
    nextBtn.disabled = !canContinue;
    nextBtn.textContent = currentStep === steps.length -1 ? 'Valider ma liste' : 'Suivant';
  }

  function clearSelectionInStep(stepId) {
    document.querySelectorAll(`#${stepId} .option`).forEach(el => {
      el.classList.remove('selected');
    });
  }

  function selectOption(event) {
    const option = event.currentTarget;
    const stepId = steps[currentStep];

    if (stepId === 'step4') {
      option.classList.toggle('selected');
    } else {
      clearSelectionInStep(stepId);
      option.classList.add('selected');
    }

    switch(stepId) {
      case 'step1':
        selections.switch = option.dataset;
        break;
      case 'step2':
        selections.sd = option.dataset;
        break;
      case 'step3':
        selections.joycon = option.dataset;
        break;
      case 'step4':
        const selectedAcc = Array.from(document.querySelectorAll('#step4 .option.selected'));
        selections.accessory = selectedAcc.map(el => el.dataset);
        break;
    }
    updateButton();
  }

  function showStep(index) {
    steps.forEach((id, i) => {
      document.getElementById(id).style.display = i === index ? 'block' : 'none';
    });
    summaryDiv.style.display = 'none';
    updateButton();
  }

  function formatPrice(price) {
    return Number(price).toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' });
  }

  function showSummary() {
    let total = 0;
    let text = 'Résumé de ta configuration :\n\n';

    if (selections.switch) {
      total += parseFloat(selections.switch.price);
      text += `Switch : ${selections.switch.name} - ${formatPrice(selections.switch.price)}\n`;
    }
    if (selections.sd) {
      total += parseFloat(selections.sd.price);
      text += `Carte SD : ${selections.sd.name} - ${formatPrice(selections.sd.price)}\n`;
    }
    if (selections.joycon) {
      total += parseFloat(selections.joycon.price);
      text += `Joy-Con : ${selections.joycon.name} - ${formatPrice(selections.joycon.price)}\n`;
    }
    if (selections.accessory.length > 0) {
      selections.accessory.forEach(acc => {
        total += parseFloat(acc.price);
        text += `Accessoire : ${acc.name} - ${formatPrice(acc.price)}\n`;
      });
    }
    text += `\nPrix total : ${formatPrice(total)}`;

    summaryDiv.textContent = text;
    summaryDiv.style.display = 'block';
  }

  nextBtn.addEventListener('click', () => {
    if (currentStep < steps.length -1) {
      currentStep++;
      showStep(currentStep);
    } else {
      showSummary();
      nextBtn.disabled = true;
    }
  });

  // Add click handlers for options
  steps.forEach(stepId => {
    document.querySelectorAll(`#${stepId} .option`).forEach(option => {
      option.addEventListener('click', selectOption);
    });
  });

  showStep(currentStep);
</script>

</body>
</html>
