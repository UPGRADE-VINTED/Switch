<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Configurateur Switch</title>
<style>
  .step { display: none; margin: 20px 0; }
  .step.active { display: block; }
  .switches img {
    width: 120px;
    margin: 0 10px;
    cursor: pointer;
    border: 2px solid transparent;
    border-radius: 8px;
    transition: border-color 0.3s;
  }
  .switches img.selected {
    border-color: #007BFF;
  }
</style>
</head>
<body>

<h2>1. Choisissez votre Switch</h2>
<div id="step-switch" class="step active switches">
  <img src="switch1.jpg" alt="Switch 1" data-name="Switch 1" />
  <img src="switch2.jpg" alt="Switch 2" data-name="Switch 2" />
  <img src="switch3.jpg" alt="Switch 3" data-name="Switch 3" />
  <img src="switch4.jpg" alt="Switch 4" data-name="Switch 4" />
  <img src="switch5.jpg" alt="Switch 5" data-name="Switch 5" />
  <img src="switch6.jpg" alt="Switch 6" data-name="Switch 6" />
</div>

<div id="step-sd" class="step">
  <h2>2. Choisissez votre carte SD</h2>
  <label><input type="radio" name="sd" value="128" /> 128 Go (environ 10 jeux) - 50 €</label><br />
  <label><input type="radio" name="sd" value="256" /> 256 Go (environ 18 jeux) - 90 €</label>
</div>

<div id="step-joycon" class="step">
  <h2>3. Choisissez vos Joy-Con</h2>
  <label><input type="number" id="joycon-pair" min="0" max="4" value="0" /> Paires de Joy-Con (40€ la 1ère paire, 30€ les suivantes)</label>
</div>

<div id="step-accessoires" class="step">
  <h2>4. Choisissez vos accessoires</h2>
  <label><input type="checkbox" value="15" /> Étui de protection (15 €)</label><br />
  <label><input type="checkbox" value="20" /> Chargeur (20 €)</label><br />
  <label><input type="checkbox" value="10" /> Câble HDMI (10 €)</label>
</div>

<button id="btn-next" style="margin-top:20px;">Suivant</button>

<h2>Résumé</h2>
<pre id="summary"></pre>

<script>
  const stepSwitch = document.getElementById('step-switch');
  const stepSD = document.getElementById('step-sd');
  const stepJoycon = document.getElementById('step-joycon');
  const stepAccessoires = document.getElementById('step-accessoires');
  const btnNext = document.getElementById('btn-next');
  const summary = document.getElementById('summary');

  let currentStep = 1;
  let choix = {
    switch: null,
    sd: null,
    joycon: 0,
    accessoires: []
  };

  // Gestion choix switch
  stepSwitch.querySelectorAll('img').forEach(img => {
    img.addEventListener('click', () => {
      // Deselect all
      stepSwitch.querySelectorAll('img').forEach(i => i.classList.remove('selected'));
      // Select clicked
      img.classList.add('selected');
      choix.switch = img.getAttribute('data-name');
    });
  });

  btnNext.addEventListener('click', () => {
    if (currentStep === 1) {
      if (!choix.switch) {
        alert("Veuillez choisir une Switch.");
        return;
      }
      // Affiche étape 2
      stepSwitch.classList.remove('active');
      stepSD.classList.add('active');
      currentStep++;
    } else if (currentStep === 2) {
      const selectedSD = document.querySelector('input[name="sd"]:checked');
      if (!selectedSD) {
        alert("Veuillez choisir une carte SD.");
        return;
      }
      choix.sd = selectedSD.value;
      stepSD.classList.remove('active');
      stepJoycon.classList.add('active');
      currentStep++;
    } else if (currentStep === 3) {
      const qty = parseInt(document.getElementById('joycon-pair').value) || 0;
      choix.joycon = qty;
      stepJoycon.classList.remove('active');
      stepAccessoires.classList.add('active');
      currentStep++;
    } else if (currentStep === 4) {
      // Récupère accessoires cochés
      const checked = stepAccessoires.querySelectorAll('input[type=checkbox]:checked');
      choix.accessoires = [];
      checked.forEach(el => {
        choix.accessoires.push({name: el.parentNode.textContent.trim(), price: parseInt(el.value)});
      });
      btnNext.style.display = 'none';
      afficherResume();
    }
  });

  function afficherResume() {
    let total = 0;
    let text = `Switch choisie : ${choix.switch}\n`;
    
    let prixSD = choix.sd === '128' ? 50 : 90;
    text += `Carte SD : ${choix.sd} Go - ${prixSD} €\n`;
    total += prixSD;

    if (choix.joycon > 0) {
      let prixJoycon = 40 + (choix.joycon - 1) * 30;
      text += `Joy-Con : ${choix.joycon} paire(s) - ${prixJoycon} €\n`;
      total += prixJoycon;
    } else {
      text += `Joy-Con : Aucun\n`;
    }

    if (choix.accessoires.length > 0) {
      text += `Accessoires :\n`;
      choix.accessoires.forEach(acc => {
        text += `  - ${acc.name}\n`;
        total += acc.price;
      });
    } else {
      text += `Accessoires : Aucun\n`;
    }

    text += `\nTotal : ${total} €`;
    summary.textContent = text;
  }
</script>

</body>
</html>
